(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5dcba4e4"],{"0dc4":function(e,t,a){"use strict";a.d(t,"b",function(){return i}),a.d(t,"e",function(){return r}),a.d(t,"f",function(){return o}),a.d(t,"a",function(){return l}),a.d(t,"d",function(){return s}),a.d(t,"g",function(){return u}),a.d(t,"c",function(){return c});var n=a("b32d");function i(e){return Object(n["a"])({url:"/role/list",method:"get",params:e})}function r(e){return Object(n["a"])({url:"/role/save",method:"post",data:e})}function o(e){return Object(n["a"])({url:"/role/update",method:"post",data:e})}function l(e){return Object(n["a"])({url:"/role/delete",method:"delete",params:{id:e}})}function s(e){return Object(n["a"])({url:"/role/menus",method:"get",params:{id:e}})}function u(e,t){return Object(n["a"])({url:"/role/update/menuList",method:"post",data:{id:e,menuList:t}})}function c(){return Object(n["a"])({url:"/role/all",method:"get"})}},"1cac":function(e,t,a){"use strict";var n=a("5ca6"),i=a.n(n);i.a},"1f34":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("div",{staticClass:"filter-container"},[a("el-input",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{placeholder:"姓名",clearable:!0},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.getList(t)}},model:{value:e.query.name,callback:function(t){e.$set(e.query,"name",t)},expression:"query.name"}}),a("el-input",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{placeholder:"邮箱",clearable:!0},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.getList(t)}},model:{value:e.query.email,callback:function(t){e.$set(e.query,"email",t)},expression:"query.email"}}),a("el-input",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{placeholder:"用户名",clearable:!0},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.search(t)}},model:{value:e.query.username,callback:function(t){e.$set(e.query,"username",t)},expression:"query.username"}}),a("el-button",{staticClass:"filter-item",attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.getList}},[e._v("\n            搜索\n        ")]),a("el-button",{staticClass:"filter-item",staticStyle:{"margin-left":"10px"},attrs:{type:"primary",icon:"el-icon-edit"},on:{click:e.handleCreate}},[e._v("\n            新增\n        ")])],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.data.tableLoading,expression:"data.tableLoading"}],staticStyle:{width:"100%"},attrs:{data:e.data.list,border:"",fit:"","highlight-current-row":""}},[a("el-table-column",{attrs:{type:"index",width:"50"}}),a("el-table-column",{attrs:{label:"头像",prop:"avatar",width:"100px",align:e.data.commonAlign},scopedSlots:e._u([{key:"default",fn:function(e){return[a("img",{staticStyle:{width:"40px",height:"40px","border-radius":"10px"},attrs:{src:e.row.avatar+"?d="+(new Date).getTime(),alt:"头像"}})]}}])}),a("el-table-column",{attrs:{label:"用户名",prop:"username",width:"200px",align:e.data.commonAlign}}),a("el-table-column",{attrs:{label:"姓名",prop:"name",width:"200px",align:e.data.commonAlign}}),a("el-table-column",{attrs:{label:"邮箱",prop:"email",width:"300px",align:e.data.commonAlign}}),a("el-table-column",{attrs:{label:"性别",prop:"gender",width:"100px",align:e.data.commonAlign},scopedSlots:e._u([{key:"default",fn:function(t){return["男"===t.row.gender?a("el-tag",{attrs:{type:"success"}},[e._v("男")]):a("el-tag",{attrs:{type:"warning"}},[e._v("女")])]}}])}),a("el-table-column",{attrs:{label:"创建人",width:"150px",align:e.data.commonAlign},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                "+e._s(t.row["creatorName"])+"\n            ")]}}])}),a("el-table-column",{attrs:{label:"创建时间",prop:"createTime",width:"200px",align:e.data.commonAlign}}),a("el-table-column",{attrs:{label:"操作",align:e.data.commonAlign,"class-name":"small-padding fixed-width","min-width":"300px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button-group",[a("el-button",{attrs:{type:"primary"},on:{click:function(a){return e.handleUpdate(t.row)}}},[e._v("编辑")]),a("el-button",{attrs:{type:"primary"},on:{click:function(a){return e.openUpdateRoleDialog(t.row)}}},[e._v("\n                        分配角色\n                    ")]),a("el-button",{attrs:{type:"danger"},on:{click:function(a){return e.handleDelete(t.row)}}},[e._v("\n                        删除\n                    ")])],1)]}}])})],1),a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.query.total>e.query.pageSize,expression:"query.total > query.pageSize"}],attrs:{total:e.query.total,page:e.query.page,limit:e.query.pageSize},on:{"update:page":function(t){return e.$set(e.query,"page",t)},"update:limit":function(t){return e.$set(e.query,"pageSize",t)},pagination:e.getList}}),a("el-dialog",{attrs:{visible:e.data.dialogFormVisible,title:"create"===e.data.dialogStatus?"新增":"编辑"},on:{"update:visible":function(t){return e.$set(e.data,"dialogFormVisible",t)}}},[a("el-form",{ref:"dataForm",staticStyle:{width:"800px","margin-left":"50px"},attrs:{rules:e.rules,model:e.obj,"label-position":"left","label-width":"70px"}},[a("el-form-item",{attrs:{label:"用户名",prop:"username"}},[a("el-input",{attrs:{placeholder:"用户名",maxlength:"64"},model:{value:e.obj.username,callback:function(t){e.$set(e.obj,"username",t)},expression:"obj.username"}})],1),a("el-form-item",{attrs:{label:"姓名",prop:"name"}},[a("el-input",{attrs:{placeholder:"姓名",maxlength:"20"},model:{value:e.obj.name,callback:function(t){e.$set(e.obj,"name",t)},expression:"obj.name"}})],1),a("el-form-item",{attrs:{label:"邮箱",prop:"email"}},[a("el-input",{attrs:{placeholder:"邮箱",rows:6,maxlength:"128"},model:{value:e.obj.email,callback:function(t){e.$set(e.obj,"email",t)},expression:"obj.email"}})],1),a("el-form-item",{attrs:{label:"性别",prop:"gender"}},[a("el-radio-group",{model:{value:e.obj.gender,callback:function(t){e.$set(e.obj,"gender",t)},expression:"obj.gender"}},[a("el-radio-button",{attrs:{label:"男"}}),a("el-radio-button",{attrs:{label:"女"}})],1)],1),a("el-form-item",{attrs:{label:"头像",prop:"avatar"}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{"show-file-list":!1,"auto-upload":!1,"on-change":e.avatarChange,action:"https://jsonplaceholder.typicode.com/posts/"}},[e.obj.avatar?a("img",{staticClass:"avatar",attrs:{src:e.obj.avatar,alt:""}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.cancel}},[e._v("取消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){"create"===e.data.dialogStatus?e.create():e.update()}}},[e._v("\n                保存\n            ")])],1)],1),a("el-dialog",{attrs:{visible:e.dialogUpdateRoleVisible,title:"编辑角色"},on:{"update:visible":function(t){e.dialogUpdateRoleVisible=t}}},[a("el-transfer",{attrs:{"filter-method":e.filterRole,data:e.roles,props:{key:"id",label:"name"},titles:["待选角色","已选角色"],filterable:"","filter-placeholder":"请输入角色名称"},model:{value:e.obj.roleIdList,callback:function(t){e.$set(e.obj,"roleIdList",t)},expression:"obj.roleIdList"}}),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogUpdateRoleVisible=!1}}},[e._v("取消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.updateRole}},[e._v("保存")])],1)],1)],1)},i=[],r=(a("7f7f"),a("d225")),o=a("b0b4"),l=a("308d"),s=a("6bb5"),u=a("4e2b"),c=a("9ab4"),d=a("60a3"),p=a("bc3a"),m=a.n(p),b=a("333d"),f=a("8819"),g=function e(){Object(r["a"])(this,e),this.id="",this.name="",this.username="",this.email="",this.gender="男",this.avatar="",this.roleIdList=[]},h=a("75fb"),v=a("b32d");function y(e){return Object(v["a"])({url:"/user/list",method:"get",params:e})}function j(e){return Object(v["a"])({url:"/user/save",method:"post",data:e})}function k(e){return Object(v["a"])({url:"/user/update",method:"post",data:e})}function w(e){return Object(v["a"])({url:"/user/delete",method:"delete",params:{id:e}})}function O(e,t){return Object(v["a"])({url:"/user/isUsernameExist",method:"get",params:{id:e,username:t}})}function x(e){return Object(v["a"])({url:"/user/roleIdList",method:"get",params:{id:e}})}function S(e,t){return Object(v["a"])({url:"/user/updateRole",method:"post",data:{id:e,roleIdList:t}})}var _,L=a("0dc4"),C=a("5154"),I=a("ee8b"),q=function e(){Object(r["a"])(this,e),this.page=1,this.pageSize=20,this.total=0,this.name="",this.username="",this.email=""},E=_=function(e){function t(){var e;return Object(r["a"])(this,t),e=Object(l["a"])(this,Object(s["a"])(t).apply(this,arguments)),e.query=new q,e.data=new f["a"],e.obj=new g,e.roles=[],e.dialogUpdateRoleVisible=!1,e.rules={name:[{required:!0,trigger:"blur",message:"请输入姓名"}],username:[new C["a"]({message:"用户名不能为空"}),new C["a"]({},e.validateUsername)],email:[new C["a"]({message:"邮箱不能为空"}),new C["a"]({},_.validateEmail)]},e}return Object(u["a"])(t,e),Object(o["a"])(t,[{key:"created",value:function(){this.getList()}},{key:"validateUsername",value:function(e,t,a){O(this.obj.id,t).then(function(e){e.data.isExist?a(new Error("用户名已存在")):a()})}},{key:"search",value:function(){this.query.page=1,this.getList()}},{key:"getList",value:function(){var e=this;this.data.tableLoading=!0,y(this.query).then(function(t){var a=t.data;e.data.list=a.rows,e.query.total=a.total,e.data.tableLoading=!1})}},{key:"handleCreate",value:function(){var e=this;this.data.dialogStatus="create",this.data.dialogFormVisible=!0,this.$nextTick(function(){e.$refs.dataForm.resetFields(),e.obj=new g})}},{key:"createFormData",value:function(){var e=new FormData;return e.append("id",this.obj.id),e.append("name",this.obj.name),e.append("username",this.obj.username),e.append("email",this.obj.email),e.append("gender",this.obj.gender),e.append("avatar",this.obj.avatar),this.img&&e.append("img",this.img),e}},{key:"create",value:function(){var e=this;this.$refs.dataForm.validate(function(t){t&&j(e.createFormData()).then(function(t){e.editSuccess(t.data.message)})})}},{key:"handleUpdate",value:function(e){var t=this;this.data.dialogStatus="update",this.data.dialogFormVisible=!0,this.$nextTick(function(){t.$refs.dataForm.resetFields();var a=e.id,n=e.name,i=e.username,r=e.email,o=e.gender,l=e.avatar,s=e.roleIdList;t.obj={id:a,name:n,username:i,email:r,gender:o,avatar:l,roleIdList:s}})}},{key:"update",value:function(){var e=this;this.$refs.dataForm.validate(function(t){t&&k(e.createFormData()).then(function(t){e.editSuccess(t.data.message)})})}},{key:"editSuccess",value:function(e){Object(I["b"])("成功",e),this.data.dialogFormVisible=!1,this.obj=new g,this.getList()}},{key:"handleDelete",value:function(e){var t=this;Object(I["a"])("删除提示","".concat(e.name,"将会被删除"),"确定","取消",function(){w(e.id).then(function(e){Object(I["b"])("成功",e.data.message),t.getList()})})}},{key:"cancel",value:function(){this.data.dialogFormVisible=!1,this.obj=new g}},{key:"filterRole",value:function(e,t){if(t.name)return t.name.indexOf(e)>-1}},{key:"openUpdateRoleDialog",value:function(e){var t=this,a=this;m.a.all([Object(L["c"])(),x(e.id)]).then(m.a.spread(function(n,i){a.roles=n.data,t.obj.roleIdList=i.data,a.obj.id=e.id,a.dialogUpdateRoleVisible=!0}))}},{key:"updateRole",value:function(){var e=this;S(this.obj.id,this.obj.roleIdList).then(function(t){Object(I["b"])("成功",t.data.message),e.dialogUpdateRoleVisible=!1,e.getList(),e.obj=new g})}},{key:"avatarChange",value:function(e){this.img=e.raw,this.obj.avatar=URL.createObjectURL(e.raw)}}],[{key:"validateEmail",value:function(e,t,a){Object(h["b"])(t)?a():a(new Error("邮箱格式不正确"))}}]),t}(d["c"]);E=_=c["a"]([Object(d["a"])({components:{Pagination:b["a"]}})],E);var F=E,N=F,$=(a("36ad"),a("2877")),A=Object($["a"])(N,n,i,!1,null,null,null);t["default"]=A.exports},"333d":function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"pagination-container",class:{hidden:e.hidden}},[a("el-pagination",e._b({attrs:{background:e.background,"current-page":e.currentPage,"page-size":e.pageSize,layout:e.layout,"page-sizes":e.pageSizes,total:e.total},on:{"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t},"update:pageSize":function(t){e.pageSize=t},"update:page-size":function(t){e.pageSize=t},"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}},"el-pagination",e.$attrs,!1))],1)},i=[],r=(a("c5f6"),a("d225")),o=a("b0b4"),l=a("308d"),s=a("6bb5"),u=a("4e2b"),c=a("9ab4"),d=a("60a3"),p=function(e,t,a,n){return e/=n/2,e<1?a/2*e*e+t:(e--,-a/2*(e*(e-2)-1)+t)},m=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}}();function b(e){document.documentElement.scrollTop=e,document.body.scrollTop=e}function f(){return document.documentElement.scrollTop||document.body.scrollTop}function g(e,t,a){var n=f(),i=e-n,r=20,o=0,l=void 0===t?500:t,s=function e(){o+=r;var t=p(o,n,i,l);b(t),o<l?m(e):a&&"function"===typeof a&&a()};s()}var h=function(e){function t(){return Object(r["a"])(this,t),Object(l["a"])(this,Object(s["a"])(t).apply(this,arguments))}return Object(u["a"])(t,e),Object(o["a"])(t,[{key:"handleSizeChange",value:function(e){this.$emit("pagination",{page:this.currentPage,limit:e}),this.autoScroll&&g(0,800)}},{key:"handleCurrentChange",value:function(e){this.$emit("pagination",{page:e,limit:this.pageSize}),this.autoScroll&&g(0,800)}},{key:"currentPage",get:function(){return this.page},set:function(e){this.$emit("update:page",e)}},{key:"pageSize",get:function(){return this.limit},set:function(e){this.$emit("update:limit",e)}}]),t}(d["c"]);c["a"]([Object(d["b"])(Number)],h.prototype,"total",void 0),c["a"]([Object(d["b"])(Number)],h.prototype,"page",void 0),c["a"]([Object(d["b"])(Number)],h.prototype,"limit",void 0),c["a"]([Object(d["b"])(Array)],h.prototype,"pageSizes",void 0),c["a"]([Object(d["b"])(String)],h.prototype,"layout",void 0),c["a"]([Object(d["b"])(Boolean)],h.prototype,"background",void 0),c["a"]([Object(d["b"])(Boolean)],h.prototype,"autoScroll",void 0),c["a"]([Object(d["b"])(Boolean)],h.prototype,"hidden",void 0),h=c["a"]([d["a"]],h);var v=h,y=v,j=(a("1cac"),a("2877")),k=Object(j["a"])(y,n,i,!1,null,"819926be",null);t["a"]=k.exports},"36ad":function(e,t,a){"use strict";var n=a("5264"),i=a.n(n);i.a},5154:function(e,t,a){"use strict";a.d(t,"a",function(){return i});var n=a("d225"),i=function e(t,a){var i=t.required,r=void 0===i||i,o=t.trigger,l=void 0===o?"blur":o,s=t.message,u=void 0===s?"":s;Object(n["a"])(this,e),this.required=r,this.trigger=l,this.message=u,a&&(this.validator=a)}},5264:function(e,t,a){},"5ca6":function(e,t,a){},8819:function(e,t,a){"use strict";a.d(t,"a",function(){return i});var n=a("d225"),i=function e(){Object(n["a"])(this,e),this.pageSizes=[10,20,30,50],this.layout="total, sizes, prev, pager, next, jumper",this.tableLoading=!1,this.dialogFormVisible=!1,this.dialogStatus="create",this.commonAlign="center",this.labelPosition="right"}},aa77:function(e,t,a){var n=a("5ca1"),i=a("be13"),r=a("79e5"),o=a("fdef"),l="["+o+"]",s="​",u=RegExp("^"+l+l+"*"),c=RegExp(l+l+"*$"),d=function(e,t,a){var i={},l=r(function(){return!!o[e]()||s[e]()!=s}),u=i[e]=l?t(p):o[e];a&&(i[a]=u),n(n.P+n.F*l,"String",i)},p=d.trim=function(e,t){return e=String(i(e)),1&t&&(e=e.replace(u,"")),2&t&&(e=e.replace(c,"")),e};e.exports=d},c5f6:function(e,t,a){"use strict";var n=a("7726"),i=a("69a8"),r=a("2d95"),o=a("5dbc"),l=a("6a99"),s=a("79e5"),u=a("9093").f,c=a("11e9").f,d=a("86cc").f,p=a("aa77").trim,m="Number",b=n[m],f=b,g=b.prototype,h=r(a("2aeb")(g))==m,v="trim"in String.prototype,y=function(e){var t=l(e,!1);if("string"==typeof t&&t.length>2){t=v?t.trim():p(t,3);var a,n,i,r=t.charCodeAt(0);if(43===r||45===r){if(a=t.charCodeAt(2),88===a||120===a)return NaN}else if(48===r){switch(t.charCodeAt(1)){case 66:case 98:n=2,i=49;break;case 79:case 111:n=8,i=55;break;default:return+t}for(var o,s=t.slice(2),u=0,c=s.length;u<c;u++)if(o=s.charCodeAt(u),o<48||o>i)return NaN;return parseInt(s,n)}}return+t};if(!b(" 0o1")||!b("0b1")||b("+0x1")){b=function(e){var t=arguments.length<1?0:e,a=this;return a instanceof b&&(h?s(function(){g.valueOf.call(a)}):r(a)!=m)?o(new f(y(t)),a,b):y(t)};for(var j,k=a("9e1e")?u(f):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),w=0;k.length>w;w++)i(f,j=k[w])&&!i(b,j)&&d(b,j,c(f,j));b.prototype=g,g.constructor=b,a("2aba")(n,m,b)}},ee8b:function(e,t,a){"use strict";a.d(t,"b",function(){return i}),a.d(t,"a",function(){return r});var n=a("5c96");function i(e,t){Object(n["Notification"])({title:e,message:t,type:"success",duration:2e3})}function r(e,t,a,i,r,o){n["MessageBox"].confirm(t,e,{confirmButtonText:a,cancelButtonText:i,type:"warning"}).then(function(){r&&r()}).catch(function(){o&&o()})}},fdef:function(e,t){e.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"}}]);
//# sourceMappingURL=chunk-5dcba4e4.25b34dc1.js.map